"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const routr_1 = require("../common/routr");
const logger_1 = require("@fonoster/logger");
const logger = (0, logger_1.getLogger)({ service: "core", filePath: __filename });
async function default_1(resource) {
    const meta = {
        kind: resource.kind,
        accessKeyId: resource.metadata.accessKeyId
        //traceId: currentSpan.spanContext().traceId
    };
    logger.verbose("creating resource", meta);
    //span.addEvent("creating resource", meta);
    await routr_1.routr.connect();
    const ref = await routr_1.routr
        .resourceType(`${resource["kind"].toLowerCase()}s`)
        .create(resource);
    // Get from the database
    const result = await routr_1.routr
        .resourceType(`${resource["kind"].toLowerCase()}s`)
        .get(ref);
    return result;
}
exports.default = default_1;
