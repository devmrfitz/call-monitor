"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const routr_1 = require("../common/routr");
const logger_1 = require("@fonoster/logger");
const logger = (0, logger_1.getLogger)({ service: "core", filePath: __filename });
async function default_1(request) {
    logger.verbose("listing resources", { request });
    if (!request.page)
        return {};
    await routr_1.routr.connect();
    const result = await routr_1.routr
        .resourceType(`${request.kind.toLowerCase()}s`)
        .list({
        page: request.page,
        itemsPerPage: request.itemsPerPage
    }, request.accessKeyId);
    const resources = result.data;
    return {
        nextPageToken: resources.length > 0 ? request.page + 1 : null,
        resources
    };
}
exports.default = default_1;
